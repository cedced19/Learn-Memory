<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>Learn Memory</title>
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="/styles/styles.css">
    </head>
    <body ng-app="LearnMemory" ng-controller="LearnMemoryCtrl">

        <div class="container" ng-show="error != true">

            <ul class="nav nav-pills">
                <li ng-class="{ active: currentFolder == 'list' }"><a href="#">List ({{ items.length }})</a></li>
                <li ng-class="{ active: currentFolder == 'creation' }"><a href="#/creation"><span class="glyphicon glyphicon-edit"></span> Create</a></li>
                <li class="active" style="display:none"><a href="#"></a></li>
            </ul>

            <p class="info">{{info}}</p>

            <div ng-show="currentFolder == 'list'">
            <input ng-model="search" type="text" class="form-control" placeholder="Search">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Substance</th>
                        <th>Content</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in items | filter:search | orderBy:'updatedAt':true" ng-click="goItem(item)">
                        <td>{{item.substance}}</td>
                        <td>{{removeHtml(item.content) | limitTo : 20}} ...</td>
                        <td>{{item.updatedAt | date: 'dd/MM/yyyy' }}</td>
                    </tr>
                </tbody>
            </table>
            </div>

            <div ng-show="currentFolder == 'creation'">
                <form name="formCreation">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Substance" ng-model="newItem.substance">
                    </div>
                    <div class="input-group">
                        <textarea rows="20" class="form-control" placeholder="Text" ng-model="newItem.markdown" ng-keyup="displayPreview()"></textarea>
                    </div>
                    <div ng-bind-html="newItem.content"></div>
                    <div class="text-center">
                        <button class="btn btn-success" ng-click="displayLesson()">Adding new item</button>
                    </div>
            </div>

            <div ng-show="currentFolder == 'item'">
                <div class="well">
                <p><label>Substance: </label> {{currentItem.substance}}</p>
                <p><label>Date: </label> {{currentItem.updatedAt | date: 'dd/MM/yyyy' }}</p>
                </form>
                <p>
                <span ng-click="waitConfirm = true" ng-show="!waitConfirm" class="glyphicon glyphicon-trash"></span>
                <span ng-click="removeLesson(currentItem)" ng-show="waitConfirm" class="glyphicon glyphicon-ok"></span>
                </p>
                <p><span ng-show="!edit" class="glyphicon glyphicon-pencil" ng-click="edit = true"></span></p>
                </div>
                <div ng-show="edit"class="input-group">
                        <textarea rows="20" class="form-control" placeholder="Text" ng-model="currentItem.markdown" ng-keyup="displayPreview()"></textarea>
                </div>
                <div ng-bind-html="currentItem.content"></div>
                <div ng-show="edit" class="text-center">
                        <button class="btn btn-success" ng-click="displayLesson()">Update item</button>
                </div>
            </div>
        </div>
            <script type="text/javascript" src="/js/scripts.js"></script>
    </body>
</html>
